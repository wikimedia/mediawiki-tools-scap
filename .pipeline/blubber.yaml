# syntax = docker-registry.wikimedia.org/wikimedia/blubber-buildkit:0.9.0
#
# A Blubber spec file for a Docker container, based on Debian 9
# (stretch), where the Scap automated test suite can be run.

version: v4

runs:
  insecurely: True
  environment:
    LANG: C.UTF-8

apt:
  packages:
    - build-essential
    - ca-certificates
    - git
    - libjpeg-dev
    - openssl
    - php-cli
    - python3
    - python3-pip
    - zlib1g-dev
    - shellcheck

python:
  version: python3
  requirements:
    - requirements.txt
    - test-requirements.txt
    - docs/requirements.txt
entrypoint: [scripts/check]

variants:
  stretch:
    copies: [local]
    base: docker-registry.wikimedia.org/wikimedia-stretch
  buster:
    copies: [local]
    base: docker-registry.wikimedia.org/wikimedia-buster
  bullseye:
    copies: [local]
    base: docker-registry.wikimedia.org/bullseye
